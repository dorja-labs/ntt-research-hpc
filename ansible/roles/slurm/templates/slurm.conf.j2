# SLURM Configuration File - Generated by Ansible
# Cluster: {{ slurm_cluster_name }}
# Generated: {{ ansible_date_time.iso8601 }}

ClusterName={{ slurm_cluster_name }}
SlurmctldHost={{ groups['slurm_head'][0] }}
SlurmctldPort=6817
SlurmdPort=6818

# State and Logging
StateSaveLocation=/var/spool/slurm/ctld
SlurmdSpoolDir=/var/spool/slurm/d
SlurmctldLogFile=/var/log/slurm-llnl/slurmctld.log
SlurmdLogFile=/var/log/slurm-llnl/slurmd.log

# Process Tracking
SwitchType=switch/none
MpiDefault=none
SlurmctldPidFile=/var/run/slurm-llnl/slurmctld.pid
SlurmdPidFile=/var/run/slurm-llnl/slurmd.pid
ProctrackType=proctrack/pgid

# Timeouts and Limits
ReturnToService=1
SlurmctldTimeout=300
SlurmdTimeout=300
InactiveLimit=0
MinJobAge=300
KillWait=30
Waittime=0

# Scheduling
SchedulerType=sched/backfill
SelectType=select/cons_tres
SelectTypeParameters=CR_Core

# Accounting and Logging
AccountingStorageType=accounting_storage/none
JobCompType=jobcomp/none
MailProg=/bin/true

# Plugin Directory
PluginDir=/usr/lib/x86_64-linux-gnu/slurm-wlm

# Node Definitions
{% for host in groups['slurm_cluster'] %}
NodeName={{ host }} NodeAddr={{ host }} CPUs=4 RealMemory=32094 State=UNKNOWN
{% endfor %}

# Partition Definitions
PartitionName=debug Nodes={% for host in groups['slurm_cluster'] %}{{ host }}{% if not loop.last %},{% endif %}{% endfor %} Default=YES MaxTime=INFINITE State=UP